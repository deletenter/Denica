<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product Management</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>

<div class="admin-layout">

  <!-- Sidebar -->
  <div class="sidebar">
    <h2>Denica Admin</h2>
    <a href="admin_dashboard.html">Dashboard</a>
    <a href="admin_members.html">Members</a>
    <a href="products.html">Products</a>
    <a href="transactions.html">Transactions</a>
    <a href="login.html">Logout</a>
  </div>

  <!-- Main Content -->
  <div class="content">
    <h1>Product Management</h1>

    <button onclick="openAddForm()">+ Add Product</button>

    <!-- PRODUCT FORM -->
    <form id="productForm" style="display:none; margin:20px 0;" onsubmit="saveProduct(event)">
      <input type="hidden" id="productId">

      <label>Product Name</label>
      <input type="text" id="productName" required>

      <label>Price (RM)</label>
      <input type="number" id="productPrice" step="0.01" required>

      <button type="submit">Save</button>
      <button type="button" onclick="closeForm()">Cancel</button>
    </form>

    <!-- PRODUCT TABLE -->
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Product Name</th>
          <th>Price (RM)</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody id="productTable">
        <tr>
          <td>101</td>
          <td>Rose Elegance</td>
          <td>129.00</td>
          <td>
            <button onclick="editProduct(101, 'Rose Elegance', 129.00)">Edit</button>
            <button onclick="deleteProduct(this)">Delete</button>
          </td>
        </tr>

        <tr>
          <td>102</td>
          <td>Midnight Oud</td>
          <td>159.00</td>
          <td>
            <button onclick="editProduct(102, 'Midnight Oud', 159.00)">Edit</button>
            <button onclick="deleteProduct(this)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<!-- JAVASCRIPT -->
<script>
let editing = false;

function openAddForm() {
  editing = false;
  document.getElementById("productForm").style.display = "block";
  document.getElementById("productForm").reset();
  document.getElementById("productId").value = "";
}

function closeForm() {
  document.getElementById("productForm").style.display = "none";
}

function editProduct(id, name, price) {
  editing = true;
  document.getElementById("productForm").style.display = "block";
  document.getElementById("productId").value = id;
  document.getElementById("productName").value = name;
  document.getElementById("productPrice").value = price;
}

function saveProduct(e) {
  e.preventDefault();

  const id = document.getElementById("productId").value;
  const name = document.getElementById("productName").value;
  const price = document.getElementById("productPrice").value;

  if (editing) {
    alert("Product updated successfully!");
  } else {
    alert("Product added successfully!");
  }

  closeForm();
}

function deleteProduct(btn) {
  if (confirm("Are you sure you want to delete this product?")) {
    btn.closest("tr").remove();
    alert("Product deleted successfully!");
  }
}
</script>

</body>
</html>

